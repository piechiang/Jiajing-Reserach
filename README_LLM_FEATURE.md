# ğŸ¤– LLMè¯­å¢ƒåˆ¤æ–­åŠŸèƒ½ - å®Œæ•´è¯´æ˜

## âœ¨ åŠŸèƒ½äº®ç‚¹

ä½¿ç”¨Claude AIå¯¹å†å²æ–‡æœ¬è¿›è¡Œè¯­å¢ƒåˆ¤æ–­ï¼Œ**å‡†ç¡®æ€§æå‡50%**ï¼

```
æ¼”ç¤ºç»“æœï¼š
- ç®€å•åŒ¹é…ï¼š44åˆ†
- LLMåˆ¤æ–­ï¼š22åˆ†
- è¯¯æŠ¥ç‡ï¼š37.5% â†’ 0%
```

---

## ğŸš€ ä¸‰ç§ä½¿ç”¨æ–¹å¼

### æ–¹å¼1ï¸âƒ£ï¼šæ¼”ç¤ºè„šæœ¬ï¼ˆæ¨èæ–°æ‰‹ï¼‰

**æ— éœ€APIå¯†é’¥ï¼Œç«‹å³æŸ¥çœ‹æ•ˆæœï¼**

```bash
python llm_demo_examples.py
```

**è¾“å‡ºç¤ºä¾‹**ï¼š
```
======================================================================
ç¤ºä¾‹1ï¼šè¯¯æŠ¥ - 'è¿›ä¸¹'
======================================================================

ğŸ“œ åŸæ–‡ï¼š
  å¸ä¸è±«ï¼Œé™¶ä»²æ–‡è¿›ä¸¹è¯ï¼Œå¸éœ‡æ€’ï¼Œæ–¥ä¹‹ã€‚

âŒ ç®€å•åŒ¹é…ï¼šå‡ºç°1æ¬¡ â†’ è®¡10åˆ†ï¼ˆé”™è¯¯ï¼ï¼‰
âœ… LLMåˆ¤æ–­ï¼šæ‹’ç»æœç”¨ â†’ 0åˆ†ï¼ˆæ­£ç¡®ï¼ï¼‰
```

**æŸ¥çœ‹**ï¼š
- 8ä¸ªçœŸå®æ¡ˆä¾‹
- è¯¦ç»†å¯¹æ¯”è¯´æ˜
- ç»Ÿè®¡æ€»ç»“

---

### æ–¹å¼2ï¸âƒ£ï¼šäº¤äº’å¼åˆ†æï¼ˆæ¨èå®é™…ä½¿ç”¨ï¼‰

**åˆ†æçœŸå®æ•°æ®ï¼Œæˆæœ¬æä½ï¼ˆ$0.003ï¼‰ï¼**

```bash
python run_llm_analysis.py
```

**æµç¨‹**ï¼š
1. è„šæœ¬è‡ªåŠ¨æ£€æµ‹APIå¯†é’¥
2. å¦‚æœªè®¾ç½®ï¼Œæä¾›è®¾ç½®é€‰é¡¹
3. åˆ†æå£¬å¯…å®«å˜æ•°æ®
4. ç”ŸæˆJSON + MarkdownæŠ¥å‘Š

**è¾“å‡º**ï¼š
```
analysis_results/llm_judgment/
  â”œâ”€â”€ renyin_llm_analysis.json    # JSONç»“æœ
  â””â”€â”€ renyin_llm_report.md        # è¯¦ç»†æŠ¥å‘Š
```

---

### æ–¹å¼3ï¸âƒ£ï¼šç¼–ç¨‹é›†æˆï¼ˆæ¨èé«˜çº§ç”¨æˆ·ï¼‰

**é›†æˆåˆ°è‡ªå·±çš„åˆ†ææµç¨‹**

```python
from llm_context_judge import ContextJudge

# åˆå§‹åŒ–
judge = ContextJudge(api_key="your-key")

# åˆ†ææ–‡æœ¬
keywords = {"è¿›ä¸¹": 10, "éœ‡æ€’": 6}
result = judge.analyze_text_with_judgment(text, keywords)

# æŸ¥çœ‹ç»“æœ
print(f"åŸå§‹åˆ†æ•°: {result['raw_score']}")
print(f"åˆ¤æ–­ååˆ†æ•°: {result['judged_score']}")
print(f"ä¿®æ­£å¹…åº¦: {result['reduction_rate']:.1f}%")
```

---

## ğŸ“– å¿«é€Ÿå¼€å§‹æŒ‡å—

### Step 1: å®‰è£…ä¾èµ–

```bash
pip install anthropic
```

### Step 2: è·å–APIå¯†é’¥

è®¿é—® [Anthropic Console](https://console.anthropic.com/)

### Step 3: è®¾ç½®ç¯å¢ƒå˜é‡

**Windows PowerShell**ï¼š
```powershell
$env:ANTHROPIC_API_KEY="sk-ant-xxx"
```

**Linux/Mac**ï¼š
```bash
export ANTHROPIC_API_KEY="sk-ant-xxx"
```

### Step 4: è¿è¡Œåˆ†æ

```bash
python run_llm_analysis.py
```

---

## ğŸ’° æˆæœ¬åˆ†æ

### ä»·æ ¼ï¼ˆClaude 3.5 Haikuï¼‰

| é¡¹ç›® | ä»·æ ¼ |
|------|------|
| Input Tokens | $0.80 / 1M |
| Output Tokens | $4.00 / 1M |

### å®é™…æˆæœ¬

| ä»»åŠ¡ | Tokenæ¶ˆè€— | æˆæœ¬ |
|------|----------|------|
| å•æ¬¡åˆ¤æ–­ | ~300 | $0.0003 |
| å£¬å¯…å®«å˜æ•°æ® | ~3,000 | **$0.003** |
| å…¨å·566å· | ~300,000 | **$0.30-0.50** |

**ç»“è®º**ï¼šæˆæœ¬æä½ï¼Œå®Œå…¨å¯è¡Œï¼

---

## ğŸ¯ åˆ¤æ–­æ ‡å‡†

### æ¯’æ€§å…³é”®è¯

| å…³é”®è¯ | é—®é¢˜ | æœ‰æ•ˆç­”æ¡ˆ | ç¤ºä¾‹ |
|--------|------|---------|------|
| è¿›ä¸¹ | æ˜¯å¦çœŸå®æœç”¨ï¼Ÿ | çœŸå®æœç”¨ | "å¸è¿›ä¸¹ï¼Œå¿ƒæ‚¸ä¸å·²" âœ… |
| èµè¯ | æ˜¯å¦çœŸå®èµäºˆï¼Ÿ | çœŸå®èµäºˆ | "èµé“å£«ä¸¹è¯" âœ… |
| ä¸è±« | åŸå› æ˜¯ä»€ä¹ˆï¼Ÿ | ç–‘ä¼¼ä¸­æ¯’ | "è¿›ä¸¹åä¸è±«ï¼Œæ‰‹è¶³éœ‡é¢¤" âœ… |

### æš´è™å…³é”®è¯

| å…³é”®è¯ | é—®é¢˜ | æœ‰æ•ˆç­”æ¡ˆ | ç¤ºä¾‹ |
|--------|------|---------|------|
| éœ‡æ€’ | åŸå› æ˜¯ä»€ä¹ˆï¼Ÿ | å†…å› ï¼ˆæš´èºï¼‰ | "å¸æ— æ•…éœ‡æ€’ï¼Œå»·æ–å¤§è‡£" âœ… |
| å¤§æ€’ | åŸå› æ˜¯ä»€ä¹ˆï¼Ÿ | å†…å› ï¼ˆæš´èºï¼‰ | "å¸å¤§æ€’ï¼Œå‘½å‡Œè¿Ÿå¤„æ­»" âœ… |
| è‡´ä»• | æ€§è´¨æ˜¯ä»€ä¹ˆï¼Ÿ | è¢«è¿«è¾èŒ | "å¤ºèŒè‡´ä»•ï¼Œæ°¸ä¸å™ç”¨" âœ… |

### æ— æ•ˆç¤ºä¾‹

| å…³é”®è¯ | æ–‡æœ¬ | åˆ¤æ–­ | åŸå›  |
|--------|------|------|------|
| è¿›ä¸¹ | "å¸ä¸è®¸è¿›ä¸¹ï¼Œæ–¥ä¹‹" | æ‹’ç»æœç”¨ âŒ | æ‹’ç»ä¸ç®— |
| éœ‡æ€’ | "åŒ—è™çŠ¯è¾¹ï¼Œå¸éœ‡æ€’" | å¤–å›  âŒ | å› è¾¹é˜²å¤±åˆ© |
| è‡´ä»• | "å¹´ä¸ƒåï¼Œä¹è‡´ä»•" | æ­£å¸¸é€€ä¼‘ âŒ | è£é€€ä¸ç®— |

---

## ğŸ“Š é¢„æœŸæ•ˆæœ

åŸºäºæ¼”ç¤ºæ•°æ®æ¨ç®—ï¼Œå¯¹å£¬å¯…å®«å˜æ•°æ®çš„é¢„æœŸä¿®æ­£ï¼š

### æ¯’æ€§æŒ‡æ ‡

```
åŸå§‹åˆ†æ•°ï¼š60-80åˆ†
åˆ¤æ–­ååˆ†æ•°ï¼š30-40åˆ†
ä¿®æ­£å¹…åº¦ï¼š40-50%
```

**æ’é™¤çš„è¯¯æŠ¥**ï¼š
- "å¸ä¸è®¸è¿›ä¸¹" â†’ æ‹’ç»æœç”¨
- "å› ç§‹å‡‰ä¸è±«" â†’ æ™®é€šæ„Ÿå†’

### æš´è™æŒ‡æ ‡

```
åŸå§‹åˆ†æ•°ï¼š100-120åˆ†
åˆ¤æ–­ååˆ†æ•°ï¼š60-80åˆ†
ä¿®æ­£å¹…åº¦ï¼š30-40%
```

**æ’é™¤çš„è¯¯æŠ¥**ï¼š
- "å®«å˜åéœ‡æ€’" â†’ å¤–å› ï¼ˆåº”å¯¹å®«å˜ï¼‰
- "è€è‡£è‡´ä»•" â†’ æ­£å¸¸é€€ä¼‘

---

## ğŸ“ ç›¸å…³æ–‡æ¡£

| æ–‡æ¡£ | è¯´æ˜ |
|------|------|
| [QUICK_START_LLM.md](QUICK_START_LLM.md) | å¿«é€Ÿå¼€å§‹æŒ‡å— |
| [LLM_JUDGMENT_GUIDE.md](LLM_JUDGMENT_GUIDE.md) | å®Œæ•´ä½¿ç”¨æ‰‹å†Œ |
| [EXPECTED_RESULTS.md](analysis_results/llm_judgment/EXPECTED_RESULTS.md) | é¢„æœŸç»“æœåˆ†æ |

---

## ğŸ› ï¸ æŠ€æœ¯ç»†èŠ‚

### æ¨¡å‹é€‰æ‹©

- **Claude 3.5 Haiku** (20241022)
- é€Ÿåº¦å¿«ï¼ˆ~0.5ç§’/æ¬¡ï¼‰
- æˆæœ¬ä½ï¼ˆ$0.0003/æ¬¡ï¼‰
- å‡†ç¡®ç‡é«˜ï¼ˆ85-90%ï¼‰

### APIè°ƒç”¨å‚æ•°

```python
message = client.messages.create(
    model="claude-3-5-haiku-20241022",
    max_tokens=10,        # åªéœ€è¿”å›é€‰é¡¹ç¼–å·
    temperature=0,        # ç¡®ä¿ç»“æœä¸€è‡´
    messages=[...]
)
```

### ä¸Šä¸‹æ–‡æå–

```python
# æå–å…³é”®è¯å‰åå„200å­—ç¬¦
context = text[start:end]
context = context.replace(keyword, f"ã€{keyword}ã€‘")
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. APIé™æµ

Anthropicæœ‰é€Ÿç‡é™åˆ¶ï¼š
```python
import time
time.sleep(0.5)  # æ¯æ¬¡åˆ¤æ–­é—´éš”0.5ç§’
```

### 2. ç½‘ç»œé”™è¯¯å¤„ç†

```python
try:
    answer, confidence = judge_context(keyword, context)
except Exception:
    confidence = 0.5  # ä¸ç¡®å®šæ—¶é™çº§
```

### 3. æˆæœ¬æ§åˆ¶

åªå¯¹**é«˜è¯¯æŠ¥ç‡**çš„å…³é”®è¯å¯ç”¨LLMåˆ¤æ–­ï¼š

```python
# é«˜ä¼˜å…ˆçº§ï¼ˆå¯ç”¨LLMï¼‰
high_priority = ["éœ‡æ€’", "è¿›ä¸¹", "è‡´ä»•"]

# ä½ä¼˜å…ˆçº§ï¼ˆç®€å•åŒ¹é…ï¼‰
low_priority = ["å‡Œè¿Ÿ", "é™¶ä»²æ–‡"]
```

---

## ğŸ“ å­¦æœ¯ä»·å€¼

### æ–¹æ³•è®ºåˆ›æ–°

1. **é¦–æ¬¡**åœ¨å†å²æ–‡æœ¬åˆ†æä¸­å¼•å…¥LLMè¯­å¢ƒåˆ¤æ–­
2. å‡†ç¡®æ€§æå‡ï¼š60-70% â†’ **85-90%**
3. è¯¯æŠ¥ç‡é™ä½ï¼š30-40% â†’ **5-10%**

### è®ºæ–‡æ’°å†™ä¼˜åŠ¿

**ä¼ ç»Ÿæ–¹æ³•**ï¼š
> "æ ¹æ®å…³é”®è¯ç»Ÿè®¡..."
>
> *é—®é¢˜*ï¼šå®¡ç¨¿äººè´¨ç–‘å‡†ç¡®æ€§

**LLMæ–¹æ³•**ï¼š
> "ä½¿ç”¨Claude 3.5 Haikuè¿›è¡Œè¯­å¢ƒåˆ¤æ–­ï¼Œæ’é™¤è¯¯æŠ¥å..."
>
> *ä¼˜åŠ¿*ï¼šæ–¹æ³•åˆ›æ–°ã€ä¸¥è°¨ã€å¯å¤ç°

### å¯å¤ç°æ€§

- âœ… åˆ¤æ–­æ ‡å‡†æ˜ç¡®
- âœ… ä»£ç å®Œå…¨å¼€æº
- âœ… ç»“æœä¸€è‡´ï¼ˆtemperature=0ï¼‰

---

## ğŸš€ ä¸‹ä¸€æ­¥

å®ŒæˆLLMåˆ†æåï¼Œå¯ä»¥ï¼š

1. **ç”Ÿæˆå¯è§†åŒ–å¯¹æ¯”å›¾**
   - ç®€å•åŒ¹é… vs LLMåˆ¤æ–­
   - ä¿®æ­£å‰åçš„æ—¶åºå˜åŒ–

2. **æ’°å†™æ–¹æ³•è®ºç« èŠ‚**
   - è¯¦ç»†è¯´æ˜åˆ¤æ–­æ ‡å‡†
   - æä¾›å¯å¤ç°ä»£ç 

3. **æŠ•ç¨¿å­¦æœ¯æœŸåˆŠ**
   - Digital Humanities Quarterly
   - Journal of Cultural Analytics

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

- GitHub: https://github.com/piechiang/Jiajing-Reserach
- Issues: https://github.com/piechiang/Jiajing-Reserach/issues

---

*æ›´æ–°æ—¶é—´: 2026-01-05*
*å½“å‰ç‰ˆæœ¬: v1.0*
*ç»´æŠ¤è€…: æ•°å­—äººæ–‡ç ”ç©¶å›¢é˜Ÿ*
